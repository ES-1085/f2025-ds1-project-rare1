---
title: "Project memo"
author: "RARE"
output: github_document
---

This document should contain a detailed account of the data clean up for your data and the design choices you are making for your plots. For instance you will want to document choices you've made that were intentional for your graphic, e.g. color you've chosen for the plot. Think of this document as a code script someone can follow to reproduce the data cleaning steps and graphics in your handout.

```{r load-packages, message = FALSE}
library(tidyverse)
library(broom)
```

## Data Clean Up Steps for Overall Data

Since the data that we received from Promise Early education was not formatted well to put into R and would be extremely complicated to clean up using code, we did all of our data cleaning in Google sheets. This included formatting all variables into columns, and adding factors such as race, years participated in the program, language status, year, etc. for groups of students. 

## Plots

### ggsave example for saving plots

```{r starwars ggsave example}
p1 <- starwars |>
  filter(mass < 1000, 
         species %in% c("Human", "Cerean", "Pau'an", "Droid", "Gungan")) |>
  ggplot() +
  geom_point(aes(x = mass, 
                 y = height, 
                 color = species)) +
  labs(x = "Weight (kg)", 
       y = "Height (m)",
       color = "Species",
       title = "Weight and Height of Select Starwars Species",
       caption = paste("This data comes from the starwars api: https://swapi.py43.com"))


ggsave("example-starwars.png", width = 4, height = 4)

ggsave("example-starwars-wide.png", width = 6, height = 4)
```



### Plot 1: _________

#### Data cleanup steps specific to plot 1

These data cleaning sections are optional and depend on if you have some data cleaning steps specific to a particular plot

```{r}

```


#### Final Plot 1

```{r dual-language-plot}
EHS_Dual_Language |>
  mutate(
    DLL_Group = if_else(`Dual Langage` == "Yes", "DLL", "Non-DLL"),
    `Time Period` = fct_relevel(`Time Period`, 
                                "Fall 2024/2025", 
                                "Winter 2024/2025", 
                                "Spring 2024/2025"),
    Average = as.numeric(Average)
  ) |>
  group_by(Category, DLL_Group, `Time Period`) |>
  summarise(
    Weighted_Average = sum(Average * `# Children`, na.rm = TRUE) / sum(`# Children`, na.rm = TRUE),
    Total_Children = sum(`# Children`, na.rm = TRUE),
    .groups = "drop"
  ) |>
  ggplot(aes(x = `Time Period`, y = Weighted_Average, 
             color = DLL_Group, group = DLL_Group)) +
  geom_line(linewidth = 1) +
  geom_point(size = 2) +
  facet_wrap(~ Category) +
  labs(
    title = "Average Skill Scores: DLL (Dual Language Learners) vs. Non-DLL Students",
    caption = "Non-DLL students scored higher than DLL students in all skill areas, with both groups improving from Fall to Spring.",
    x = "Assessment Period (2024â€“2025 School Year)",
    y = "Weighted Average Score",
    color = "Group"
   ) + scale_x_discrete(
  labels = c(
    "Fall 2024/2025" = "Fall",
    "Winter 2024/2025" = "Winter",
    "Spring 2024/2025" = "Spring"
  )
) +
  scale_color_brewer(palette = "Set2") + 
  theme(
    axis.text.x = element_text(angle = 45, hjust = 1),
    plot.margin = margin(t = 10, r = 10, b = 40, l = 10),
    plot.caption = element_text(hjust = 0.5),
  )
ggsave("dual-language-plot.png")
```



### Plot 2: _________

```{r multi-year-plot}
EHS_multi_year |>
  mutate(
    Program_Status = if_else(`Multi-Year` == "yes", "Multi-Year", "First-Year")) |>
  group_by(Category, Program_Status) |>
  summarise(
    Weighted_Average = sum(Average * `# Children`) / sum(`# Children`),
    Total_Children = sum(`# Children`),
    .groups = 'drop'
  ) |>
  mutate(
    Legend_Label = paste0(Program_Status, " (n=", Total_Children, ")")
  ) |>
  mutate(
    Category = forcats::fct_reorder(Category, Weighted_Average, .fun = max)
  ) |>
  ggplot(aes(x = Category, y = Weighted_Average, fill = Legend_Label)) +
  geom_col(position = position_dodge()) +
  labs(
    title = "Higher Average Gold Assesment Scores for Multi-Year Students",
    subtitle = "Categories ranked top-down by the highest weighted average score", 
    y = "Score", 
    x = " ",
    fill = "Program Status (Total Children)",
    caption = "Data reflects scores weighted by child enrollment (n) included in the legend. \n Higher scores on the GOLD assessment indicate greater mastery of developmental objectives."
  ) +
  coord_flip() +
  scale_fill_brewer(palette = "Dark2") +
    theme(
    plot.caption = element_text(
      size = 9, 
      hjust = 0.5,
      face = "italic"
    )
  )
ggsave("multi-year-vs-single-year.png", width = 4, height = 4)
```


### Plot 3: ___________

``` {r agerange1to2}
age_one <- EHS_all_students |>
  filter(`age range` == "1-2") |>
  group_by(Category) |>
  summarise(
    Weighted_Average = weighted.mean(Average, `# Children`),
    Children_N = sum(`# Children`),
    .groups = "drop"
  )

ggplot(age_one, aes(x = reorder(Category, Weighted_Average), y = Weighted_Average)) +
  geom_col(fill = "#E69F00") +
  labs(
    title = "Proficiency in Categories by Age Range",
    subtitle = "From Year 1 to Year 2",
    x = "Skills by Catagory", 
    y = "Weighted Average"
  )
ggsave("ageplot1.png")
```

``` {r agerange2to3}
age_two <- EHS_all_students |>
  filter(`age range` == "2-3") |>
  group_by(Category) |>
  summarise(
    Weighted_Average = weighted.mean(Average, `# Children`),
    Children_N = sum(`# Children`),
    .groups = "drop"
  )

ggplot(age_two, aes(x = reorder(Category, Weighted_Average), y = Weighted_Average)) +
  geom_col(fill = "#56B4E9") +
  labs(
    title = "Proficiency in Categories by Age Range",
    subtitle = "From Year 2 to Year 3",
    y = "Weighted Average", 
    x = "Skills by Catagory"
  )
ggsave("ageplot2.png")
```

``` {r agerangebto1}
age_birth <- EHS_all_students |>
  filter(`age range` == "B-1") |>
  group_by(Category) |>
  summarise(
    Weighted_Average = weighted.mean(Average, `# Children`),
    Children_N = sum(`# Children`),
    .groups = "drop"
  )

ggplot(age_birth, aes(x = reorder(Category, Weighted_Average), y = Weighted_Average)) +
  geom_col(fill = "#009E73") +
  labs(
    title = "Proficiency in Categories by Age Range",
    subtitle = "From Birth to Year 1",
    y = "Weighted Average", 
     x = "Skills by Catagory"
  ) 
ggsave("ageplotbirth.png")
```


### Plot 4: ___________ 

